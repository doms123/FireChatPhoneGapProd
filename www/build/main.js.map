{"version":3,"sources":["../../src/providers/auth/auth.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/providers/chat/chat.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport * as firebase from 'firebase/app';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nimport { AngularFireDatabase, FirebaseListObservable, FirebaseObjectObservable } from 'angularfire2/database';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport 'rxjs/add/observable/timer';\r\nimport 'rxjs/add/operator/throttletime';\r\n/*\r\n  Generated class for the AuthProvider provider.\r\n\r\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\r\n  for more info on providers and Angular DI.\r\n*/\r\n@Injectable()\r\nexport class AuthProvider {\r\n  users: FirebaseListObservable<any[]>;\r\n  user: FirebaseObjectObservable<any>;\r\n  loggedUserId:string;\r\n  mouseEvent: Subscription;\r\n  timer: Subscription;\r\n\r\n  constructor(\r\n    public http: Http,\r\n    public afAuth: AngularFireAuth,\r\n    public storage: Storage,\r\n    public db: AngularFireDatabase,\r\n  ) {\r\n    this.user = db.object('/users');\r\n\r\n    this.afAuth.authState.subscribe(user => {\r\n      if(user) {\r\n        this.loggedUserId = user.uid;\r\n        this.updateOnConnect();\r\n        this.updateOnDisconnect();\r\n        this.updateOnIdle();\r\n      }else {\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  updateOnConnect() {\r\n    return this.db.object('.info/connected').subscribe(connected => {\r\n      if(connected) {\r\n        let status = connected.$value ? 'online' : 'offline';\r\n        this.updateStatus(status);\r\n      }\r\n    });\r\n  }\r\n\r\n  updateOnDisconnect() {\r\n    firebase.database().ref('/users/' + this.loggedUserId)\r\n                       .onDisconnect()\r\n                       .update({status: 'offline'});\r\n  }\r\n\r\n  updateOnIdle() {\r\n    this.mouseEvent = Observable\r\n                      .fromEvent(document, \"mouseMove\")\r\n                      .throttleTime(2000)\r\n                      .subscribe(() => {\r\n                        this.updateStatus('online')\r\n                        this.resetTimer()\r\n                      }); \r\n  }\r\n\r\n  resetTimer() {\r\n    this.timer.unsubscribe();\r\n    this.timer = Observable.timer(5000)\r\n                           .subscribe(() => {\r\n                            this.updateStatus('away')\r\n                           });\r\n  }\r\n\r\n  updateStatus(status: string) {\r\n    this.db.object('users/' + this.loggedUserId).update({'status': status});\r\n  }\r\n\r\n  register(email:string, pass:string) {\r\n    return this.afAuth.auth.createUserWithEmailAndPassword(email, pass);\r\n  }\r\n\r\n  resetPassword(email:string) {\r\n    return this.afAuth.auth.sendPasswordResetEmail(email);\r\n  }\r\n\r\n  login(email:string, pass:string) {\r\n    return this.afAuth.auth.signInWithEmailAndPassword(email, pass);\r\n  }\r\n\r\n  fbLogin() {\r\n    let fbAuth = this.afAuth.auth.signInWithPopup(new firebase.auth.FacebookAuthProvider());\r\n    fbAuth.then((res) => {\r\n      let data = res.user;\r\n      this.db.object('/users/' + data.uid).set({email: data.email, photo: data.photoURL, displayName: data.displayName, isVerified: true});\r\n    });\r\n    return fbAuth;\r\n  }\r\n\r\n  googleLogin() {\r\n    let googleAuth = firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider());\r\n    googleAuth.then((res) => {\r\n      let data = res.user;\r\n      this.db.object('/users/' + data.uid).set({email: data.email, photo: data.photoURL, displayName: data.displayName, isVerified: true});\r\n    });\r\n    return googleAuth;\r\n  }\r\n\r\n  createUser(uId:string, email:string, photo:string, name:string) {\r\n    this.db.object('/users/' + uId).set({email: email, photo: photo, displayName: name});\r\n  }\r\n\r\n  loginVerified(uId:string) {\r\n    // check first if user account already verified\r\n    let user = firebase.database().ref('/users/' + uId);\r\n\r\n    user.once(\"value\")\r\n      .then(snapshot => {\r\n        if(!snapshot.hasChild('isVerified')) {\r\n          this.db.object('/users/' + uId).update({isVerified:true});\r\n        }\r\n      })\r\n  }\r\n\r\n  loggedOut() {\r\n    this.updateStatus('offline');\r\n    this.afAuth.auth.signOut();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 150;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 150\n// module chunks = 11","var map = {\n\t\"../pages/chat/chat.module\": [\n\t\t417,\n\t\t10\n\t],\n\t\"../pages/contacts/contacts.module\": [\n\t\t418,\n\t\t9\n\t],\n\t\"../pages/home/home.module\": [\n\t\t419,\n\t\t0\n\t],\n\t\"../pages/individual-chat/individual-chat.module\": [\n\t\t420,\n\t\t8\n\t],\n\t\"../pages/landing/landing.module\": [\n\t\t421,\n\t\t7\n\t],\n\t\"../pages/login/login.module\": [\n\t\t422,\n\t\t6\n\t],\n\t\"../pages/profile/profile.module\": [\n\t\t423,\n\t\t5\n\t],\n\t\"../pages/register/register.module\": [\n\t\t424,\n\t\t4\n\t],\n\t\"../pages/reset-password/reset-password.module\": [\n\t\t425,\n\t\t1\n\t],\n\t\"../pages/settings/settings.module\": [\n\t\t426,\n\t\t3\n\t],\n\t\"../pages/tabs/tabs.module\": [\n\t\t416,\n\t\t2\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 191;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 191\n// module chunks = 11","import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport * as firebase from 'firebase/app';\r\nimport {AngularFireDatabase, FirebaseListObservable, FirebaseObjectObservable } from 'angularfire2/database';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\n\r\n/*\r\n  Generated class for the ChatProvider provider.\r\n\r\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\r\n  for more info on providers and Angular DI.\r\n*/\r\n@Injectable()\r\nexport class ChatProvider {\r\n  users: FirebaseListObservable<any>;\r\n  user: FirebaseObjectObservable<any>;\r\n  loggedUserId:string;\r\n  loggedUserName:string;\r\n  loggedUserPhoto:string;\r\n  usersRef = firebase.database().ref('/users');\r\n  chats: FirebaseListObservable<any>;\r\n\r\n  constructor(\r\n    public http: Http,\r\n    public db: AngularFireDatabase,\r\n    public afAuth: AngularFireAuth,\r\n  ) {\r\n\r\n    afAuth.authState.subscribe(user => {\r\n      // console.log(user)\r\n      this.user = this.db.object('/users/'+user.uid, {preserveSnapshot: true});\r\n      this.user.subscribe(userData => {\r\n        this.user = userData.val();\r\n        //console.log(userData.val())\r\n        let photo;\r\n        if(!('photo' in this.user)) {\r\n          photo = 'none';\r\n        }else {\r\n          photo = userData.val().photo;\r\n        }\r\n        this.getLoggedUserPhoto(photo);\r\n        this.loggedUserId   = userData.key;\r\n        this.loggedUserName = userData.val().displayName;\r\n      })\r\n    });\r\n  }\r\n\r\n  getUsers() {\r\n    this.users = this.db.list('/users', {\r\n      query: {\r\n        orderByChild: 'isVerified',\r\n        equalTo: true\r\n      }\r\n    });\r\n    return this.users;\r\n  }\r\n\r\n  getLoggedUserPhoto(photo:string) {\r\n    this.loggedUserPhoto = photo;\r\n  }\r\n\r\n  getLoggedUserId() {\r\n    return this.loggedUserId;\r\n  }\r\n\r\n  chatMember(user2Id:string, user2:string) {\r\n    let user1Id = this.loggedUserId;\r\n    let user1  = this.loggedUserName;\r\n    // let user2 = receiverId;\r\n    let roomName = (user1 < user2 ? user1+'_'+user2 : user2+'_'+user1);\r\n    let obj:object = {};\r\n    obj[user1] = true;\r\n    obj[user2] = true;\r\n\r\n    this.db.object('/chat_room/'+roomName).set(obj);\r\n\r\n    return roomName;\r\n  }\r\n\r\n  sendMessage(chatRoom:string, chatMsg:string) {\r\n    this.db.list('/chats/'+chatRoom).push({\r\n      name: this.loggedUserName,\r\n      senderPhoto: this.loggedUserPhoto,\r\n      message: chatMsg,\r\n      timestamp: firebase.database.ServerValue.TIMESTAMP\r\n    });\r\n  }\r\n\r\n  loadChats(chatRoom:string) {\r\n    const chatsObservable = this.db.list('/chats/'+chatRoom);\r\n    return chatsObservable;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/chat/chat.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\r\nimport { MyApp } from './app.component';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\n\r\n// Firebase Imports\r\nimport { AngularFireModule } from 'angularfire2';\r\nimport { AngularFireDatabaseModule } from 'angularfire2/database';\r\nimport { AngularFireAuthModule } from 'angularfire2/auth';\r\n\r\n// Auth Service\r\nimport { AuthProvider } from '../providers/auth/auth';\r\nimport { HttpModule } from '@angular/http';\r\nimport { IonicStorageModule } from '@ionic/storage';\r\n\r\n// Providers\r\nimport { ChatProvider } from '../providers/chat/chat';\r\n\r\n// Firebase Config\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAAGkJZJsX9QGUEkKzx_ZEEzQWFJJ27oEs\",\r\n  authDomain: \"ionicapp-2e811.firebaseapp.com\",\r\n  databaseURL: \"https://ionicapp-2e811.firebaseio.com\",\r\n  storageBucket: \"ionicapp-2e811.appspot.com\",\r\n  messagingSenderId: \"1063432282060\"\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp, {}, \n{\n  links: [\n    { loadChildren: '../pages/chat/chat.module#ChatPageModule', name: 'ChatPage', segment: 'chat', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/contacts/contacts.module#ContactsPageModule', name: 'ContactsPage', segment: 'contacts', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/home/home.module#HomePageModule', name: 'HomePage', segment: 'home', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/tabs/tabs.module#TabsPageModule', name: 'TabsPage', segment: 'tabs', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/individual-chat/individual-chat.module#IndividualChatPageModule', name: 'IndividualChatPage', segment: 'individual-chat', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/landing/landing.module#LandingPageModule', name: 'LandingPage', segment: 'landing', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/login/login.module#LoginPageModule', name: 'LoginPage', segment: 'login', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/profile/profile.module#ProfilePageModule', name: 'ProfilePage', segment: 'profile', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/register/register.module#RegisterPageModule', name: 'RegisterPage', segment: 'register', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/reset-password/reset-password.module#ResetPasswordPageModule', name: 'ResetPasswordPage', segment: 'reset-password', priority: 'low', defaultHistory: [] },\n    { loadChildren: '../pages/settings/settings.module#SettingsPageModule', name: 'SettingsPage', segment: 'settings', priority: 'low', defaultHistory: [] }\n  ]\n}),\r\n    AngularFireModule.initializeApp(firebaseConfig), // imports firebase/app needed for everything\r\n    AngularFireDatabaseModule, // imports firebase/database, only needed for database features\r\n    AngularFireAuthModule, // imports firebase/auth, only needed for auth features,\r\n    HttpModule, \r\n    IonicStorageModule.forRoot(),\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\r\n    AuthProvider,\r\n    ChatProvider,\r\n  ]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\r\nimport { Platform,  } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { AuthProvider } from '../providers/auth/auth';\r\n\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  rootPage:string; \r\n\r\n\r\n  constructor(\r\n    platform: Platform, \r\n    statusBar: StatusBar, \r\n    splashScreen: SplashScreen,\r\n    public authProvider: AuthProvider,\r\n    public storage: Storage\r\n  ) {\r\n    platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      statusBar.styleDefault();\r\n      splashScreen.hide();\r\n    });\r\n\r\n\r\n    storage.get('userId').then((user) => {\r\n      if(user != null) {\r\n        this.rootPage = 'HomePage';\r\n      }else {\r\n        this.rootPage = 'LandingPage';\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}